<!--
             _.-~-.
           7''  Q..\
        _7         (_
      _7  _/    _q.  /
    _7 . ___  /VVvv-'_                                            .
   7/ / /~- \_\\      '-._     .-'                      /       //
  ./ ( /-~-/||'=.__  '::. '-~'' {             ___   /  //     ./{
 V   V-~-~| ||   __''_   ':::.   ''~-~.___.-'' _/  // / {_   /  {  /
  VV/-~-~-|/ \ .'__'. '.    '::                     _ _ _        ''.
  / /~~~~||VVV/ /  \ )  \        _ __ ___   ___ ___(_) | | __ _   .::'
 / (~-~-~\\.-' /    \'   \::::. | '_ ` _ \ / _ \_  / | | |/ _` | :::'
/..\    /..\__/      '     '::: | | | | | | (_) / /| | | | (_| | ::'
vVVv    vVVv                 ': |_| |_| |_|\___/___|_|_|_|\__,_| ''

This is the custom Mozilla Login Experience, designed and built by Mozilla's IAM Project.

Version: 1.1.1 (unreleased/beta)
Changelog: https://github.com/mozilla-iam/auth0-custom-lock/blob/master/CHANGELOG.md

These are the variables we are using:

  Auth0-domain: {{{ auth0_domain }}}
  Client ID: {{{ client_id }}}
  LDAP connection name: {{{ LDAP_connection_name }}}
  Person API domain: {{{ person_api_domain }}}
  Google Tag Manager ID: {{{ GTM_ID }}}
  Features:
   autologin: {{{ features.autologin }}}
   person_api_lookup: {{{ features.person_api_lookup }}}

The code is the result of a build process, please find the source code
on GitHub: https://github.com/mozilla-iam/auth0-custom-lock
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Mozilla Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../../dist/css/styles.css" type="text/css" inline />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet">
  </head>
  <body data-decorator="load-ga display-rp-name">
    <div class="banner">
      <p>We have launched and are actively testing the new login experience. Please report any issues. <a href="https://discourse.mozilla.org/t/important-changing-the-look-of-your-login/25843" class="banner__button" target="_blank">Read more</a> <a href="https://wiki.mozilla.org/IAM/Frequently_asked_questions#New_Login_Experience_FAQ_.28Frequently_Asked_Questions.29" class="banner__button" target="_blank">FAQ</a></p>
    </div>
    <div class="card">
      <a href="https://mozilla.org" class="logo" target="_blank"><img alt="Mozilla" src="../images/mozilla.svg" inline /></a>
      <noscript><p>This login form requires JavaScript to work, please enable it to log in.</p></noscript>
      <form data-decorator="init-auth handle-submit" method="post" action="/" lock-state="initial">
        <fieldset data-decorator="filter-connections">
          <legend class="rp-name"><span class="visually-hidden">Log in to </span><span id="rp-name-placeholder" class="rp-name__text"></span></legend>
          <div id="loading" class="loading" data-screen>
            <p class="visually-hidden ">Loadingâ€¦</p>
            <img src="../images/loading.svg" class="loading__spinner" inline />
            <p role="alert" id="loading__status" class="loading__status"></p>
          </div>
          <div id="initial" data-screen data-hidden inert>
            <p id="initial-login-text">Log in with email<span> or third-party</span></p>
            <label for="field-email" class="visually-hidden">E-mail address</label>
            <input type="email" name="username" id="field-email" placeholder="Email address" autocomplete="username email" autofocus />
            <input type="submit" class="button button--full-width" id="enter-initial" value="Enter" />
            <ul class="login-options list list--plain">
              <li data-optional-login-method="github">
                <button class="button button--full-width button--social button--secondary" type="button" data-handler="authorise-github">
                  <img inline class="icon" src="../images/github.svg">
                  <span>Log in with GitHub</span>
                </button>
              </li>
              <li data-optional-login-method="google-oauth2">
                <button class="button button--full-width button--social button--secondary" type="button" data-handler="authorise-google">
                  <img inline  class="icon" src="../images/google.svg">
                  <span>Log in with Google</span>
                </button>
              </li>
            </ul>
          </div>
          <div id="ldap" data-screen data-hidden inert>
            <p>Welcome</p>
            <label for="field-password" class="visually-hidden">Password</label>
            <input type="password" id="field-password" autocomplete="current-password" name="password" placeholder="Password" data-decorator="submit-with-enter" data-continue-with="authorise-ldap-credentials"  />
            <input type="submit" class="button button--full-width" id="authorise-ldap-credentials" value="Enter"/>
            <hr>
            <button type="button" class="button button--text-only card__back button--unpadded" data-handler="go-to-initial-page">Need to log in with a different account?</button>
          </div>
          <div id="non-ldap" data-screen data-hidden inert>
            <ul class="login-options list list--plain" data-optional-login-method="email">
              <li>
                <button class="button button--full-width button--secondary" type="button" data-handler="send-passwordless-link">Send me an email</button>
              </li>
            </ul>
            <a href="https://wiki.mozilla.org/IAM/Frequently_asked_questions#Q:_Why_do_you_support_email_login_.28.22passwordless.22.29_if_it.27s_less_safe_than_other_methods.3F" class="button button--text-only button--unpadded" target="_blank">Why an email?</a>
            <ul class="login-options list list--plain">
              <li data-optional-login-method="github">
                <button class="button button--full-width button--social button--secondary" type="button" data-handler="authorise-github">
                  <img inline class="icon" src="../images/github.svg">
                  <span>Log in with GitHub</span>
                </button>
              </li>
              <li data-optional-login-method="google-oauth2">
                <button class="button button--full-width button--social button--secondary" type="button" data-handler="authorise-google">
                  <img inline  class="icon" src="../images/google.svg">
                  <span>Log in with Google</span>
                </button>
              </li>
            </ul>
            <hr>
            <button type="button" class="button button--text-only card__back button--unpadded" data-handler="go-to-initial-page">Need to log in with a different account?</button>
          </div>
          <div id="passwordless-success" data-screen data-hidden inert>
            <h2 class="card__heading card__heading--success"><img src="../images/envelope.svg" class="card__heading-icon" inline /> <span>Success</span></h2>
            <p>Email sent to <span id="passwordless-success-email-address"></span>, your login link will expire in 15 minutes.</p>
            <hr>
            <button id="back" type="button" class="button button--text-only card__back  button--unpadded" data-handler="go-to-initial-page">Need to send that to a different email?</button>
          </div>
          <div id="error-password" data-screen data-hidden inert>
            <h2 class="card__heading card__heading--error" id="error-message-ldap"><img src="../images/circled-x.svg" class="card__heading-icon" inline /> <span>Error</span></h2>
            <p>Please attempt again or contact the Help Desk for assistance.</p>
            <label for="field-password-try-2" class="visually-hidden">Password</label>
            <input type="password" name="password" id="field-password-try-2" autocomplete="current-password" placeholder="Password" data-decorator="submit-with-enter" data-continue-with="authorise-ldap-credentials-try-2" />
            <input type="submit" class="button button--full-width" id="authorise-ldap-credentials-try-2" value="Enter" />
            <hr>
            <button type="button" class="button button--text-only card__back button--unpadded" data-handler="go-to-initial-page">Need to log in with a different account?</button>
          </div>
          <div id="error-passwordless" data-screen data-hidden inert>
            <h2 class="card__heading card__heading--error" id="error-message-passwordless"><img src="../images/circled-x.svg" class="card__heading-icon" inline /> <span>Error</span></h2>
            <p>We cannot send an email to this address</p>
            <button type="button" class="button button--text-only card__back  button--unpadded" data-handler="go-to-initial-page">Try again</button>
            <hr>
            <button type="button" class="button button--text-only card__back button--unpadded" data-handler="go-to-initial-page">Need to log in with a different account?</button>
          </div>
          <div id="ldap-not-available" data-screen data-hidden inert>
            <h2 class="card__heading card__heading--error"><img src="../images/circled-x.svg" class="card__heading-icon" inline /> <span>Error</span></h2>
            <p>Unfortunately, this website does not offer login with Mozilla LDAP.</p>
            <hr>
            <button type="button" class="button button--text-only card__back button--unpadded" data-handler="go-to-initial-page">Need to log in with a different account?</button>
          </div>
        </fieldset>
      </form>
      <ul class="legal-links list list--plain">
        <li><a href="https://www.mozilla.org/en-US/about/legal/" target="_blank">Legal</a></li>
        <li><a href="https://www.mozilla.org/en-US/privacy/websites/" target="_blank">Privacy</a></li>
        <li><a href="https://discourse.mozilla.org/c/iam" target="_blank">Need help?</a></li>
      </ul>
    </div>
    <script src="../../dist/js/main.js" inline></script>
  </body>
</html>
